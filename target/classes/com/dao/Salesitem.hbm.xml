<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd">
<!-- 
    Mapping file autogenerated by MyEclipse Persistence Tools
-->
<hibernate-mapping>
    <class name="com.dao.Salesitem" table="SALESITEM" schema="MSH">
        <composite-id >
            <key-property name="receiptnoSalesitem" type="java.lang.String">
                <column name="RECEIPTNO_SALESITEM" length="20" />
            </key-property>
            <key-property name="idSalesitem" type="java.lang.Long">
                <column name="ID_SALESITEM" precision="15" scale="0" />
            </key-property>
        </composite-id>
        <property name="itemSalesitem" type="java.lang.String">
            <column name="ITEM_SALESITEM" length="100" />
        </property>
        <property name="countSalesitem" type="java.lang.Long">
            <column name="COUNT_SALESITEM" precision="15" scale="0" />
        </property>
        <property name="amountSalesitem" type="java.math.BigDecimal">
            <column name="AMOUNT_SALESITEM" precision="38" scale="0" />
        </property>
    </class>
    <!-- 查詢 商品銷售數量-->
    <sql-query name="salesitem.query.salesitemCount">
    <![CDATA[
    select a.*, name_item,id_item,rownum
from item inner join 
(select id_salesitem,sum(count_salesitem) num
from salesitem  inner join 
trans
on salesitem.RECEIPTNO_SALESITEM=trans.RECEIPTNO_TRANS
where date_trans  between  to_date(:sDate,'YYYYMMDDHH24MISS') and  to_date(:eDate,'YYYYMMDDHH24MISS')
group by id_salesitem) a
on id_item=id_salesitem
    
       ]]>
     
    </sql-query>
</hibernate-mapping>
